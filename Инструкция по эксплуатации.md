# Инструкция по эксплуатации модели Большого адронного коллайдера

## Введение

Данная инструкция предназначена для пользователей улучшенной учебной модели Большого адронного коллайдера (БАК). Эта модель основана на реальных данных от CERN, но является учебной и не предназначена для профессиональных научных исследований. Модель позволяет визуализировать и симулировать ключевые процессы, происходящие в БАК, включая движение частиц, столкновения и распады.

## 1. Установка и запуск

### Требования к системе
- Python 3.8 или новее
- Библиотеки: numpy, matplotlib, scipy, plotly (для интерактивной 3D-визуализации)
- Для анимаций: ffmpeg или pillow
- Для экспорта в ROOT: библиотека ROOT (опционально)

### Установка зависимостей
```bash
pip install numpy matplotlib scipy plotly pillow
```

### Запуск модели
Для запуска полной симуляции выполните:
```bash
python lhc_model.py
```

Для запуска с пользовательскими параметрами (например, с 10 столкновениями):
```python
from lhc_model import LHC_Model
lhc = LHC_Model()
lhc.run_full_simulation(num_collisions=10)
```

## 2. Основные возможности

Модель предоставляет следующие основные функции:
- Визуализацию структуры коллайдера
- Симуляцию движения частиц в кольце
- Моделирование столкновений и генерацию продуктов
- Симуляцию распада частиц
- Визуализацию динамики пучка
- Анализ параметрических зависимостей
- Создание анимаций процессов
- Экспорт данных в формат ROOT

## 3. Пошаговая инструкция по использованию

### 3.1. Базовая визуализация коллайдера

```python
from lhc_model import LHC_Model

# Создание модели
lhc = LHC_Model()

# Визуализация кольца коллайдера
lhc.visualize_ring()

# Визуализация кольца в 3D (требуется Plotly)
lhc.visualize_ring_3d()
```

Результаты сохранятся в файлы `lhc_ring.png` и `lhc_ring_3d.html` соответственно.

### 3.2. Симуляция и визуализация столкновений

```python
# Симуляция одного столкновения
collision = lhc.simulate_collision()

# Визуализация столкновения
lhc.visualize_collision()

# Интерактивная визуализация (требуется Plotly)
lhc.visualize_collision_interactive()
```

Для симуляции с заданной энергией:
```python
lhc.visualize_collision(energy=10e12)  # 10 ТэВ
```

### 3.3. Симуляция динамики пучка

```python
# Визуализация динамики пучка за 1000 оборотов
lhc.visualize_beam_dynamics(num_turns=1000)
```

Это покажет:
- Рост эмиттанса пучка
- Изменение размеров пучка
- Динамику светимости
- Фазовую диаграмму пучка

### 3.4. Визуализация распада частиц

```python
# Визуализация цепочки распада бозона Хиггса
lhc.visualize_particle_decay('higgs_boson')

# Визуализация цепочки распада топ-кварка
lhc.visualize_particle_decay('top_quark')
```

### 3.5. Анализ параметрических зависимостей

```python
# Визуализация зависимостей ключевых параметров от энергии
lhc.visualize_parameter_dependencies()
```

Этот метод покажет 6 графиков:
1. Магнитное поле vs энергия
2. Лоренц-фактор vs энергия
3. Скорость vs энергия
4. Светимость vs энергия
5. Потери на синхротронное излучение
6. Эмиттанс vs энергия

### 3.6. Создание анимации

```python
# Создание анимации движения частицы (100 кадров)
lhc.create_animation(filename="lhc_animation.mp4", num_frames=100)
```

Если ffmpeg не установлен, анимация будет сохранена в GIF формате.

### 3.7. Экспорт данных

```python
# Экспорт результатов симуляции в формат ROOT
lhc.export_to_root("lhc_results.root")

# Генерация событий с использованием MadGraph (требуется установленный MadGraph)
lhc.generate_events_with_madgraph(process="p p > h", num_events=100)
```

## 4. Примеры выполняемых задач

### Задача 1: Исследование зависимости магнитного поля от энергии

**Цель:** Понять, как изменяется требуемое магнитное поле при увеличении энергии пучка.

**Выполнение:**
```python
lhc = LHC_Model()

# Визуализация зависимости
lhc.visualize_parameter_dependencies()

# Расчет конкретного значения
energy = 7e12  # 7 ТэВ
required_field = lhc.calculate_magnetic_field(energy)
print(f"Требуемое магнитное поле для энергии {energy/1e12} ТэВ: {required_field:.2f} Тл")
```

**Интерпретация результатов:**
- График показывает линейную зависимость магнитного поля от энергии
- При энергии 6.5 ТэВ требуется магнитное поле ~8.33 Тл
- Это объясняет, почему БАК не может работать на энергиях выше 7 ТэВ - достигнут предел сверхпроводящих магнитов

### Задача 2: Анализ вероятностей различных типов столкновений

**Цель:** Изучить, как меняются вероятности различных типов столкновений при изменении энергии.

**Выполнение:**
```python
lhc = LHC_Model()

# Получение вероятностей для энергии 13 ТэВ
probabilities_13tev = lhc._get_collision_probabilities(13e12)
print("Вероятности при 13 ТэВ:", probabilities_13tev)

# Получение вероятностей для энергии 7 ТэВ
probabilities_7tev = lhc._get_collision_probabilities(7e12)
print("Вероятности при 7 ТэВ:", probabilities_7tev)

# Визуализация
lhc.visualize_collision(energy=13e12)
```

**Интерпретация результатов:**
- Вероятность упругого рассеяния снижается с ростом энергии
- Вероятность производства бозона Хиггса увеличивается с энергией
- При 7 ТэВ вероятность обнаружения бозона Хиггса значительно ниже, чем при 13 ТэВ
- Это объясняет, почему для открытия бозона Хиггса потребовались запуски на максимальной энергии

### Задача 3: Симуляция распада бозона Хиггса

**Цель:** Изучить основные каналы распада бозона Хиггса и их вероятности.

**Выполнение:**
```python
lhc = LHC_Model()

# Визуализация цепочки распада
lhc.visualize_particle_decay('higgs_boson')

# Получение коэффициентов ветвления
decay_products = lhc.particle_db.get_particle_decay_products('higgs_boson')
print("Каналы распада бозона Хиггса:")
for particle, prob in decay_products:
    print(f"- {particle}: {prob:.4f}")
```

**Интерпретация результатов:**
- Наиболее вероятный канал: распад на пару b-кварков (~58%)
- Значительная вероятность распада на пару W-бозонов (~21%)
- Редкие каналы: распад на пару фотонов (~0.23%)
- Для обнаружения бозона Хиггса используются как доминирующие, так и редкие каналы

### Задача 4: Анализ динамики пучка

**Цель:** Исследовать, как изменяются параметры пучка за время работы коллайдера.

**Выполнение:**
```python
lhc = LHC_Model()

# Симуляция динамики пучка
dynamics = lhc.simulate_beam_dynamics(num_turns=2000)

# Анализ эмиттанса
print(f"Начальный эмиттанс: {dynamics['emittance'][0]:.2e} м·рад")
print(f"Конечный эмиттанс: {dynamics['emittance'][-1]:.2e} м·рад")
print(f"Рост эмиттанса: {dynamics['emittance'][-1]/dynamics['emittance'][0]:.1f}x")

# Визуализация
lhc.visualize_beam_dynamics(num_turns=2000)
```

**Интерпретация результатов:**
- Эмиттанс постепенно растет из-за эффектов пространственного заряда
- Светимость снижается со временем, что требует периодической "перезарядки" пучка
- Вертикальный размер пучка обычно меньше горизонтального из-за фокусирующих свойств квадрупольных магнитов

### Задача 5: Сравнение параметров для различных частиц

**Цель:** Сравнить релятивистские параметры для протонов и электронов при одинаковой энергии.

**Выполнение:**
```python
lhc = LHC_Model()

# Энергия 6.5 ТэВ
energy = 6.5e12

# Для протонов
gamma_proton = lhc.calculate_relativistic_factor(energy, 'proton')
speed_proton = lhc.calculate_speed(energy, 'proton')
diff_proton = c - speed_proton

# Для электронов
gamma_electron = lhc.calculate_relativistic_factor(energy, 'electron')
speed_electron = lhc.calculate_speed(energy, 'electron')
diff_electron = c - speed_electron

print(f"Протоны при 6.5 ТэВ:")
print(f"- Лоренц-фактор: {gamma_proton:.0f}")
print(f"- Скорость: {speed_proton:.2f} м/с")
print(f"- Отличие от c: {diff_proton:.4f} м/с")

print(f"\nЭлектроны при 6.5 ТэВ:")
print(f"- Лоренц-фактор: {gamma_electron:.0f}")
print(f"- Скорость: {speed_electron:.2f} м/с")
print(f"- Отличие от c: {diff_electron:.10f} м/с")
```

**Интерпретация результатов:**
- Для протонов лоренц-фактор ~7000, для электронов ~13 млн
- Протоны движутся со скоростью, на ~3 м/с меньше скорости света
- Электроны движутся со скоростью, на ~0.00000003 м/с меньше скорости света
- Это объясняет, почему БАК использует протоны, а не электроны - у протонов значительно меньше потерь на синхротронное излучение

### Задача 6: Воспроизведение эксперимента по обнаружению бозона Хиггса

**Цель:** Симулировать условия, при которых был обнаружен бозон Хиггса.

**Выполнение:**
```python
lhc = LHC_Model()

# Симуляция столкновений при энергии 8 ТэВ (первая фаза обнаружения)
events_8tev = lhc.simulate_collision(energy=8e12, num_events=1000)

# Подсчет событий с производством бозона Хиггса
higgs_events = [e for e in events_8tev if e['event_type'] == 'higgs_boson_production']
print(f"Найдено {len(higgs_events)} событий с производством бозона Хиггса из 1000")

# Анализ каналов распада
decay_products = []
for event in higgs_events:
    for product in event['products']:
        if product['name'] != 'higgs_boson':  # Игнорируем сам бозон Хиггса
            decay_products.append(product['name'])

# Подсчет частоты различных каналов
from collections import Counter
decay_counts = Counter(decay_products)
print("\nЧастота каналов распада:")
for particle, count in decay_counts.most_common():
    print(f"- {particle}: {count} ({count/len(higgs_events):.1%})")

# Визуализация типичного события
if higgs_events:
    lhc.visualize_collision_interactive(energy=8e12)
```

**Интерпретация результатов:**
- При 1000 симуляциях будет найдено около 1-2 событий с производством бозона Хиггса
- Доминирующий канал распада - на пару b-кварков
- Для подтверждения открытия требуется статистически значимое количество событий
- В реальном эксперименте для обнаружения бозона Хиггса потребовались данные за несколько лет работы

## 5. Интерпретация результатов

### Ключевые моменты при анализе результатов:
1. **Статистическая природа результатов**: Из-за случайного характера процессов требуется многократная симуляция для получения статистически значимых результатов.

2. **Сравнение с реальными данными**: Для проверки модели можно сравнить полученные результаты с данными от CERN (доступны в открытом доступе).

3. **Ограничения модели**:
   - Упрощенные физические модели
   - Отсутствие некоторых эффектов (например, полная QCD)
   - Ограниченная точность визуализации

4. **Анализ неопределенностей**: В реальных экспериментах важны не только средние значения, но и их неопределенности.

## 6. Рекомендации по использованию

1. Для учебных целей рекомендуется запускать `run_full_simulation()` с небольшим количеством столкновений (5-10).

2. При исследовании конкретных явлений используйте целевые методы (например, `visualize_particle_decay()` для изучения распадов).

3. Для получения статистически значимых результатов при симуляции редких процессов (например, производство бозона Хиггса) увеличьте количество симуляций.

4. Сравнивайте результаты с реальными данными из открытых источников (CERN Open Data Portal).

5. Используйте интерактивные визуализации (требуется Plotly) для лучшего понимания процессов.

## 7. Типичные ошибки и их решение

1. **Ошибка: "ModuleNotFoundError: No module named 'plotly'"**
   - Решение: Установите Plotly: `pip install plotly`
   - Альтернатива: Используйте базовые методы визуализации без Plotly

2. **Ошибка при создании анимации: "Error saving animation"**
   - Решение: Установите ffmpeg или используйте GIF-формат
   - Альтернатива: Отключите создание анимации в коде

3. **Нереалистичные результаты при симуляции**
   - Проверьте, правильно ли задана энергия (в эВ, а не в ТэВ)
   - Убедитесь, что используете актуальную версию модели с обновленными параметрами

4. **Долгое выполнение симуляции**
   - Уменьшите количество столкновений или оборотов
   - Для быстрой проверки используйте упрощенные методы

## Заключение

Эта улучшенная модель Большого адронного коллайдера предоставляет мощный инструмент для изучения физики высоких энергий. Хотя она является учебной и имеет определенные ограничения, она позволяет глубоко понять принципы работы реального коллайдера и основные физические процессы, происходящие в нем.

Для дальнейшего изучения рекомендуется:
1. Экспериментировать с различными параметрами
2. Сравнивать результаты с реальными данными
3. Изучать дополнительные материалы от CERN
4. При необходимости расширять модель своими улучшениями

Удачи в изучении физики элементарных частиц!
